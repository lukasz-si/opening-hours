/*! opening-hours - v1.0.0 - 2015-01-30
* see: https://github.com/lukasz-si/opening-hours
* Copyright (c) 2015 Lukasz
* Licensed: The MIT License (MIT) */
!function(a,b){"function"==typeof define&&define.amd?define("OpeningHours",["jquery"],function(c){return b(a,c)}):a.OpeningHours=b(a,a.jQuery||a.$)}(this,function(a,b){var c,d,e;return function(a){function b(a,b){var c,d,e,f,g,h,i,j,k,l,m=b&&b.split("/"),n=p.map,o=n&&n["*"]||{};if(a&&"."===a.charAt(0)&&b){for(m=m.slice(0,m.length-1),a=m.concat(a.split("/")),j=0;l=a[j];j++)if("."===l)a.splice(j,1),j-=1;else if(".."===l){if(1===j&&(".."===a[2]||".."===a[0]))return!0;j>0&&(a.splice(j-1,2),j-=2)}a=a.join("/")}if((m||o)&&n){for(c=a.split("/"),j=c.length;j>0;j-=1){if(d=c.slice(0,j).join("/"),m)for(k=m.length;k>0;k-=1)if(e=n[m.slice(0,k).join("/")],e&&(e=e[d])){f=e,g=j;break}if(f)break;!h&&o&&o[d]&&(h=o[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function f(b,c){return function(){return m.apply(a,r.call(arguments,0).concat([b,c]))}}function g(a){return function(c){return b(c,a)}}function h(a){return function(b){n[a]=b}}function i(b){if(o.hasOwnProperty(b)){var c=o[b];delete o[b],q[b]=!0,l.apply(a,c)}if(!n.hasOwnProperty(b))throw new Error("No "+b);return n[b]}function j(a,c){var d,e,f=a.indexOf("!");return-1!==f?(d=b(a.slice(0,f),c),a=a.slice(f+1),e=i(d),a=e&&e.normalize?e.normalize(a,g(c)):b(a,c)):a=b(a,c),{f:d?d+"!"+a:a,n:a,p:e}}function k(a){return function(){return p&&p.config&&p.config[a]||{}}}var l,m,n={},o={},p={},q={},r=[].slice;l=function(b,c,d,e){var g,l,m,p,r,s,t=[];if(e=e||b,"function"==typeof d){for(c=!c.length&&d.length?["require","exports","module"]:c,s=0;s<c.length;s++)if(r=j(c[s],e),m=r.f,"require"===m)t[s]=f(b);else if("exports"===m)t[s]=n[b]={},g=!0;else if("module"===m)l=t[s]={id:b,uri:"",exports:n[b],config:k(b)};else if(n.hasOwnProperty(m)||o.hasOwnProperty(m))t[s]=i(m);else if(r.p)r.p.load(r.n,f(e,!0),h(m),{}),t[s]=n[m];else if(!q[m])throw new Error(b+" missing "+m);p=d.apply(n[b],t),b&&(l&&l.exports!==a&&l.exports!==n[b]?n[b]=l.exports:p===a&&g||(n[b]=p))}else b&&(n[b]=d)},c=d=m=function(b,c,d,e){return"string"==typeof b?i(j(b,c).f):(b.splice||(p=b,c.splice?(b=c,c=d,d=null):b=a),c=c||function(){},e?l(a,b,c,d):setTimeout(function(){l(a,b,c,d)},15),m)},m.config=function(a){return p=a,m},e=function(a,b,c){b.splice||(c=b,b=[]),o[a]=[a,b,c]},e.amd={jQuery:!0}}(),e("../tools/almond",function(){}),e("js/OpeningHours",["jquery"],function(a){var b,c="<div class='opening-hours'><div class='title'></div><div class='days'></div><div class='hours'></div></div>",d="<div class='day-wrapper'><div class='day'></div><div class='arrow-down'></div></div>";return b=function(e,f){var g,h,i,j=this;this.options=a.extend({},b.DEFAULT_OPTIONS,f),this.validateOptions(this.options),this.$el=a(e),this.$el.html(c),g=this.$el.find(".days"),this.$hoursContainer=this.$el.find(".hours"),this.$el.find(".title").text(this.options.title),a.each(this.options.days,function(b,c){var e=a(d);j.options.firstDaySunday||(b=6===b?0:++b),c.id=b,e.data("day",c).find(".day").text(c.name||"-").css({width:j.options.cellWidth,height:j.options.cellHeight}),null===c.hours&&e.addClass("closed"),g.append(e)}),h=g.find(".day-wrapper"),null===this.options.selectedDay||isNaN(this.options.selectedDay)?this.selectDay((new Date).getDay()):(i=this.options.selectedDay>=0&&this.options.selectedDay<=6?this.options.selectedDay:0,this.selectDay(i)),this.options.cssStyle&&this.$el.find(".opening-hours").addClass(this.options.cssStyle),h.click(function(){var b,c=a(this);return c.hasClass("selected")?!1:(b=c.data("day").id,isNaN(b)&&(b=0),j.selectDay(b),!1)})},b.prototype.selectDay=function(b){var c,d,e=this;d=this.$el.find(".day-wrapper").removeClass("selected"),d.each(function(){var d=a(this),f=d.data("day"),g=f.id;return g===b?(d.addClass("selected"),c=f.hours,(null===c||void 0===c)&&(c=e.options.closedMsg),e.$hoursContainer.text(c),!1):!0})},b.prototype.validateOptions=function(a){7!==a.days.length&&this._throwError("number of days must be equal 7")},b.prototype._throwError=function(a){throw Error(a)},b.DEFAULT_OPTIONS={title:"Opening hours",closedMsg:"Closed",days:[{name:"Mo",hours:"10:00 - 18:00"},{name:"Tu",hours:"10:00 - 18:00"},{name:"We",hours:"10:00 - 18:00"},{name:"Th",hours:"10:00 - 18:00"},{name:"Fr",hours:"10:00 - 18:00"},{name:"Sa",hours:null},{name:"Su",hours:null}],cellWidth:"35px",cellHeight:"30px",selectedDay:null,firstDaySunday:!1,cssStyle:""},b}),e("jquery",function(){return b}),d("js/OpeningHours")});